on:
    issues:
      types: [opened]
    pull_request_target:
      types: [opened]
  
  permissions:
    issues: write
    pull-requests: write
  
  jobs:
    labeler:
      runs-on: ubuntu-latest
      steps:
        - name: Checkout code
          uses: actions/checkout@v2
        - name: Install GitHub CLI
          run: |
            sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-key C99B11DEB97541F0
            sudo apt-add-repository https://cli.github.com/packages
            sudo apt update
            sudo apt install gh
        - name: Label issues or pull requests
          if: ${{ github.event_name == 'issues' || github.event_name == 'pull_request_target' }}
          run: |
            if [[ "${{ github.event.issue }}" != "" ]]; then
              echo "Labeling issue"
              gh issue add-label "${{ github.event.issue.number }}" "new contributor"
            elif [[ "${{ github.event.pull_request }}" != "" ]]; then
              echo "Labeling pull request"
              gh pr add-label "${{ github.event.pull_request.number }}" "new contributor"